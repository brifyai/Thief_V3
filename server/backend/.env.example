# Variables de entorno de ejemplo
# Claves y configuración para desarrollo local

# API Key de Chutes AI (OpenAI-compatible). Obténla en https://chutes.ai/docs/api-reference/overview
CHUTES_API_KEY=cpk_178f36e444794015a6c6765c24569340.73d645ff58545311aa226d6de7ec2a15.W0WaeOgYQRVOVskEVTtzWUstJEUcl2Ls

# Configuración del modelo y esfuerzo de razonamiento
AI_MODEL=openai/gpt-oss-20b
AI_REASONING_EFFORT=medium

# JWT Secret (cambia esto en producción a algo más seguro)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=24h

# Puerto del servidor
PORT=3000

# Configuración de Postgres (Prisma)
DATABASE_URL="postgresql://postgres:password@localhost:5432/scraping_db?schema=public"

# Configuración de Redis (BullMQ)
# Local: redis://localhost:6379
# Upstash: rediss://default:password@host:port
REDIS_URL="redis://localhost:6379"

# Worker de BullMQ (solo para servidores dedicados, NO Vercel)
# En Vercel, dejar en false o comentar
# En Railway/Render, poner en true
ENABLE_WORKER=true

# ===== CORS - ORÍGENES PERMITIDOS =====
# Lista de URLs permitidas para hacer requests al backend (separadas por coma)
# 
# IMPORTANTE: 
# - En DESARROLLO: localhost se permite automáticamente en cualquier puerto
# - En PRODUCCIÓN: Debes listar TODOS los orígenes permitidos
# 
# Ejemplos:
# - Desarrollo local: http://localhost:3000,http://127.0.0.1:3000
# - Frontend en Vercel: https://mi-app.vercel.app
# - Frontend en Netlify: https://mi-app.netlify.app
# - Múltiples dominios: https://app.com,https://admin.app.com,http://localhost:3000
# 
# NOTA: En producción, SOLO usa HTTPS (excepto localhost)
# NOTA: En desarrollo (NODE_ENV=development), localhost funciona automáticamente
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# Configuración de rate limiting (opcional)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Configuración de Scraping Automático
# Habilitar/deshabilitar scraping automático (true/false)
SCRAPING_ENABLED=true

# Horarios de scraping (formato cron). Múltiples horarios separados por coma
# Ejemplos:
# - Una vez al día a las 2:00 AM: 0 2 * * *
# - Dos veces al día (2:00 AM y 2:00 PM): 0 2 * * *,0 14 * * *
# - Cada 6 horas: 0 */6 * * *
# - Solo días laborables a las 8:00 AM: 0 8 * * 1-5
SCRAPING_SCHEDULES=0 2 * * *

# Zona horaria para los horarios de scraping
SCRAPING_TIMEZONE=America/Santiago

# Pausa entre requests en milisegundos (para no sobrecargar servidores)
SCRAPING_DELAY_MS=1000

# ===== OPTIMIZACIONES DE SCRAPING =====
# Scraping paralelo: número de URLs a scrapear simultáneamente
# Valores recomendados:
# - 1: Secuencial (más lento pero más seguro)
# - 3: Moderado (balance entre velocidad y carga)
# - 5: Rápido (recomendado para producción)
# - 10: Muy rápido (solo si tienes buenos recursos)
SCRAPING_CONCURRENCY=5

# Caché de scraping: tiempo en segundos que se cachea un resultado
# - 3600: 1 hora (recomendado)
# - 7200: 2 horas
# - 1800: 30 minutos
SCRAPING_CACHE_TTL=3600

# Detección de paywall: habilitar/deshabilitar
PAYWALL_DETECTION_ENABLED=true

# ===== LIMPIEZA AUTOMÁTICA DE NOTICIAS =====
# Habilitar/deshabilitar limpieza automática de noticias antiguas (true/false)
CLEANUP_ENABLED=true

# Días de retención de noticias (las noticias más antiguas se eliminarán)
# Ejemplos:
# - 7 días (1 semana): 7
# - 30 días (1 mes): 30
# - 90 días (3 meses): 90
# - 365 días (1 año): 365
CLEANUP_RETENTION_DAYS=30

# Horario de limpieza (formato cron)
# Ejemplos:
# - Todos los domingos a las 3:00 AM: 0 3 * * 0
# - Primer día del mes a las 2:00 AM: 0 2 1 * *
# - Todos los días a las 4:00 AM: 0 4 * * *
CLEANUP_SCHEDULE=0 3 * * 0

# Zona horaria para el horario de limpieza
CLEANUP_TIMEZONE=America/Santiago

# ===== CONFIGURACIÓN DE OCR =====
# Google Vision API (opcional pero recomendado para máxima precisión)
# 1. Crea un proyecto en Google Cloud Console
# 2. Habilita la API de Cloud Vision
# 3. Crea una cuenta de servicio
# 4. Descarga el archivo JSON de credenciales
# 5. Copia el archivo a server/backend/google-credentials.json
# 6. O establece la variable de entorno con la ruta completa
GOOGLE_APPLICATION_CREDENTIALS=./google-credentials.json

# OCR Space API (alternativa gratuita)
# Regístrate en https://ocr.space/ para obtener una API key
OCR_SPACE_API_KEY=your-ocr-space-api-key-here